controller:
  serviceType: ${service_type}

  installPlugins:
    - kubernetes
    - workflow-aggregator
    - git
    - credentials-binding
    - pipeline-stage-view
    - docker-workflow
    - pipeline-utility-steps

  JCasC:
    configScripts:
      kaniko-pod-template: |
        jenkins:
          clouds:
            - kubernetes:
                name: "kubernetes"
                serverUrl: "https://kubernetes.default"
                skipTlsVerify: true
                namespace: "jenkins"
                jenkinsUrl: "http://jenkins:8080"
                jenkinsTunnel: "jenkins-agent:50000"
                templates:
                  - name: "kaniko-builder"
                    label: "kaniko-builder"
                    serviceAccount: "jenkins"
                    containers:
                      - name: "kaniko"
                        image: "gcr.io/kaniko-project/executor:debug"
                        command: "/busybox/cat"
                        ttyEnabled: true
                        resourceRequestCpu: "500m"
                        resourceRequestMemory: "1Gi"
                        resourceLimitCpu: "1000m"
                        resourceLimitMemory: "2Gi"
                      - name: "git"
                        image: "alpine/git:latest"
                        command: "cat"
                        ttyEnabled: true
                    volumes:
                      - secretVolume:
                          mountPath: "/kaniko/.docker"
                          secretName: "ecr-credentials"

rbac:
  create: true

agent:
  enabled: true
